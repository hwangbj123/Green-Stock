<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace= "com.green.greenstock.repository.interfaces.BoardNoticeRepository">
	
	
	<!-- 공지사항 리스트  -->
	<select id = "findAll" resultType = "com.green.greenstock.repository.model.Noticeboard" >
	SELECT	* FROM noticeboard;				
</select>
	
	<!-- 공지사항 작성 -->
	<insert id = "writeNotice">
	INSERT INTO noticeboard(		
			user_id,
			notice_title,
			notice_content,
			notice_created,
			notice_updated		
		)
	values(#{userId},#{noticeTitle},#{noticeContent},now(),now());
	</insert>
	
	<!-- 공지사항 수정  -->
	<update id = "updateNotice">
		UPDATE noticeboard 
		SET 
			notice_title = #{noticeTitle}, 
			notice_content = #{noticeContent}, 
			notice_updated = now(),
			notice_state = #{noticeState} 
		WHERE id = #{id};	
	</update>
	
	<!-- 공지사항 삭제  -->
	<delete id="deleteNotice">
		delete from  noticeboard
		where id = #{id};
	</delete>
	
	<!-- 공지사항 상세보기  -->
	<select id = "viewNoticePage" resultType ="com.green.greenstock.repository.model.Noticeboard">
		SELECT * FROM noticeboard Where id = #{id};
	</select>
	
	<!-- 조회수 증가 -->
	<update id = "noticeHitCount">
		UPDATE noticeboard
		SET hit_count = hit_count +1
		WHERE id = #{id};
	</update>
	
	<!-- 페이징 기능  -->
    <select id ="listCount" resultType ="com.green.greenstock.dto.NoticePagingDto">
	SELECT  *
	FROM noticeboard
	WHERE user_id = #{userId}
	AND notice_state = #{noticeState}
    ORDER BY #{id} DESC
	Limit #{total},#{pageNum};   
	</select>  
</mapper>